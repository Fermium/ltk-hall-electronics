*****************************************************************************************
***                                                                                   ***
*** SIMetrix/SIMPLIS Elite with DVM and Verilog for SIMPLIS Version 8.20a (x64) - 19/08/2019 18:54***
*** Platform: Windows 10                                                              ***
*** Architecture: x64                                                                 ***
*** Serial Number:                                                                    ***
*** User:                                                                             ***
***                                                                                   ***
*** TITLE:   * C:\altium-projects\Hall-electronic\simulations\current_generator.sxsch***
*** NETLIST: C:\altium-projects\Hall-electronic\simulations\design.net                ***
***                                                                                   ***
*****************************************************************************************

********************************************************************************
***                                                                          ***
***                                Input Deck                                ***
***                                                                          ***
********************************************************************************

.options allowdivzero=1
.options initCondMode=2
.options icres=0.001
.options inhibitAttoISource=1
#SIMETRIX
X1 R7_P V3_P V1_P 0 X1_out AD8605 pinnames: inp inn vsp vsn out
V1 V1_P 0 5
X2 R1_P C3_N V1_P 0 X2_out AD8605 pinnames: inp inn vsp vsn out
V2 V2_P 0 1.5
R1 R1_P 0 10
V3 V3_P X2_out AC 1
X4 R3_P V5_P V8_P 0 X4_out AD8605 pinnames: inp inn vsp vsn out
R2 X1_out R2_N 0
X$V4 R18_N 0 SQU_SOURCE pinnames: P N params: _V1=0 _V2=5 _FREQ=100 _DELAY=0 _DRATIOx100=50 _T_RISE=10u _T_FALL=10u _DAMP_COEF=0 _PWIDTH=4.99m _OFF_UNTIL_DELAY=0 _IDLE_IN_POP=0 _USEPHASE=0 _PHASE=0
R3 R3_P R13_P 10k
V5 V5_P V5_N AC 1
R4 R2_N R1_P 10
R5 R5_P V2_P 10k
V7 V7_P 0 150m
R6 X2_out C3_N 10k
V8 V8_P 0 5
R7 R7_P R5_P 10k
R8 C3_N 0 1k
R9 R10_P 0 10k
R10 R10_P R18_N 100
R11 R18_P 0 10k
R12 V5_N 0 10
R13 R13_P V7_P 10k
R14 R16_N V5_N 10
R16 X4_out R16_N 0
R18 R18_P R18_N 100
X$Q1 R5_P R10_P 0 2N7002/NXP pinnames: D G S
X$Q2 R13_P R18_P 0 2N7002/NXP pinnames: D G S
C1 R3_P 0 10n   
C2 R7_P 0 10n   
C3 X2_out C3_N 10n   
.KEEP X2_out V3_P
.GRAPH "db(:X2_out/:V3_P)" Curvelabel="Gain" nowarn=true yunit="dB" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=20 persistence=-1 colourname=Probe1_bode_color     axisname=bodemag     userid=Probe1$GAIN. MeasureSpec="Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0"
.post_process probe_measure Probe1$GAIN. Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0
.GRAPH "ph(:X2_out/:V3_P)" Curvelabel="Phase" nowarn=true yunit="degrees" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=45 persistence=-1 colourname=Probe1_bode_color   axistype=grid  axisname=bodephase    userid=Probe1$PHASE. MeasureSpec="Phase\sMargin\s(Phase\sPlot)|0|0|0|0"
.post_process probe_measure Probe1$PHASE. Phase\sMargin\s(Phase\sPlot)|0|0|0|0
.GRAPH R1#P curveLabel="I(R1-P)" nowarn=true analysis=tran|ac|dc disabled=false 
.GRAPH R12#P curveLabel="I(R1-P)" nowarn=true analysis=tran|ac|dc disabled=false 
.KEEP V5_N V5_P
.GRAPH "db(:V5_N/:V5_P)" Curvelabel="Gain" nowarn=true yunit="dB" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=20 persistence=-1 colourname=Probe4_bode_color     axisname=bodemag     userid=Probe4$GAIN. MeasureSpec="Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0"
.post_process probe_measure Probe4$GAIN. Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0
.GRAPH "ph(:V5_N/:V5_P)" Curvelabel="Phase" nowarn=true yunit="degrees" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=45 persistence=-1 colourname=Probe4_bode_color   axistype=grid  axisname=bodephase    userid=Probe4$PHASE. MeasureSpec="Phase\sMargin\s(Phase\sPlot)|0|0|0|0"
.post_process probe_measure Probe4$PHASE. Phase\sMargin\s(Phase\sPlot)|0|0|0|0
*.TRAN 0 20m 0 10u ; SWEEP SINGLE DEVICE=C3 DEC 1 10p 100n
.AC DEC 100 1m 100Meg SWEEP SINGLE DEVICE=R14 DEC 10 100m 100
*.DC v2 0 2.5 2.5025025025025m
.options KeepAllAci
.SUBCKT 2N7002/NXP  DRAIN GATE SOURCE
LD DRAIN 5 7e-10
RLD2 DRAIN 5 1.7592904
RLD1 5 4 0.00035
LG GATE 1 2.8e-09
RLG GATE 1 7.0371616
LS SOURCE 8 8e-10
RLS2 SOURCE 8 2.0106176
RLS1 8 7 0.0069
RDS 7 4 4800000000 TC=-0.05
RS 6 7 0.0001
RD 3 4 1.34735898321161 TC=0.00476908397815729,2.19614445937605e-05
RBD 9 4 0.286924398929818 TC=0.00476908397815729,2.19614445937605e-05
DBD 7 9 DBD
M1 3 2 6 6 MINT
RGS 2 6 1500000000
CGS 2 6 1.505e-11
RG 1 2 1.767
* CGD
C11    11   12   1E-12
V11    11   0   0Vdc
G11    3 2 VALUE { V(13, 0)*I(V11) }
E11    12   0  3 2  1
E12    13   0  TABLE {V(12)}
+ -10	22.000
+ -5	22.000
+ -2	22.000
+ -1	22.000
+ -0.5	22.000
+ -0.2	22.000
+ -0.1	22.000
+ 0	22.000
+ 0.1	22.000
+ 0.2	21.000
+ 0.3	20.000
+ 0.4	29.000
+ 0.5	28.000
+ 0.6	17.500
+ 0.7	17.000
+ 0.8	16.000
+ 0.9	15.500
+ 1	15.000
+ 2	13.000
+ 5	9.600
+ 10	7.700
+ 30	5.000
+ 60	3.500
.MODEL MINT NMOS(Vto=2.14882067023342 Kp=5.1926e-01 Nfs=0 Eta=0
+ Level=3 L=1e-4 W=1e-4 Gamma=0 Phi=0.6 Is=1e-24
+ Js=0 Pb=0.8 Cj=0 Cjsw=0 Cgso=0 Cgdo=0 Cgbo=0
+ Tox=1e-07 Xj=0
+ U0=600 Vmax=1000)
.MODEL DBD D(Bv=60.00 Ibv=1.00E-05 Rs=1E-6 Is=4.81161504587125e-14
+ N=1 M=0.2 VJ=0.5 Fc=0.5 Cjo=1.694e-11 Tt=3e-08)
.ENDS
*******************************************************************************
*******************************************************************************
*****************************************************************
* NXP BSH103
*
* Polarity N-Channel
* Ratings 30V/5.00E-01OHMS/0.5A
*
* Date Created Thu May  5 12:38:26 2005
*
*****************************************************************
* Model Generated by Transim Technology
*           Copyright(c) 2004
*         All Rights Reserved
*    UNPUBLISHED LICENSED SOFTWARE
*           www.transim.com
*
* Contains Proprietary Information Which
* is The Property of Transim or it's licensees.
*
* Commercial Use or Resale Restricted by
* Transim License Agreement.
*
*****************************************************************
.SUBCKT SQU_SOURCE 1 2 params: _V1=0 V2=1 _FREQ=100k _DELAY=0 _OFF_UNTIL_DELAY=0 _IDLE_IN_POP=0 _USEPHASE=0 _PHASE=0
V1 1 2 PWLS PUL
+ V1={_V1} 
+ V2={_V2} 
+ FREQ={_FREQ} 
+ DELAY={IFF(_USEPHASE, _PHASE/360/_FREQ, _DELAY)} 
+ OFF_UNTIL_DELAY={_OFF_UNTIL_DELAY} 
+ END
.ENDS
.SUBCKT AD8605      1   2   99   50   45
*#ASSOC Category="Op-amps" symbol=opamp
*?@ Start SIMPLIS Encryption $$WC_SIMPLIS_ENCRYPT_TAG$$
*
* INPUT STAGE
*
M1  14  7  8  8 PIX L=1E-6 W=1600E-6
M2  16  2  8  8 PIX L=1E-6 W=1600E-6
M3  17  7 10 10 NIX L=1E-6 W=1600E-6
M4  18  2 10 10 NIX L=1E-6 W=1600E-6
RC5 14 50 4E+3
RC6 16 50 4E+3
RC7 99 17 4E+3
RC8 99 18 4E+3
C1  14 16 0.6E-12
C2  17 18 0.6E-12
I1  99  8 100E-6
I2  10 50 100E-6
V1  99  9 0.3
V2  13 50 0.3
D1   8  9 DX
D2  13 10 DX
EOS  7  1 POLY(3) (22,98) (73,98) (81,98) 10E-6 1 1 1
IOS  1  2 0.05E-12
*
* CMRR 100dB,  POLE AT 4.5KHz
*
ECM1 21 98 POLY(2) (1,98) (2,98) 0 0.5 0.5
CCM1 21 22 3.54E-10
RCM1 21 22 100E3
RCM2 22 98 1
*
* PSRR=95dB, ZERO AT 534Hz
*
EPSY 98 72 POLY(1) (99,50) 0 1
CPS3 72 73 5.30E-9
RPS3 72 73 56234
RPS4 73 98 1
*
*
* VOLTAGE NOISE REFERENCE OF 8nV/rt(Hz)
*
VN1 80 98 0
RN1 80 98 16.45E-3
HN  81 98 VN1 5.8
RN2 81 98 1
*
* INTERNAL VOLTAGE REFERENCE
*
EREF 98  0 POLY(2) (99,0) (50,0) 0 .5 .5
GSY  99 50 (99,50) 48E-6
EVP  97 98 POLY(1) (99,50) -0.6 0.5
EVN  51 98 POLY(1) (50,99) 0.6 0.5
*
* GAIN STAGE
*
G1 98 30 POLY(2) (14,16) (17,18) 0 56.3E-6 56.3E-6
R1 30 98 5.43E8
CF 45 30 9E-12
D3 30 97 DX
D4 51 30 DX
*
* OUTPUT STAGE
*
M5  45 46 99 99 POX L=1E-6 W=1.08E-3
M6  45 47 50 50 NOX L=1E-6 W=1.61E-3
EG1 99 46 POLY(1) (98,30) 0.4644 1
EG2 47 50 POLY(1) (30,98) 0.4394 1
*
* MODELS
*
.MODEL POX PMOS (LEVEL=2,KP=10E-6,VTO=-0.328,LAMBDA=0.01,RD=0)
.MODEL NOX NMOS (LEVEL=2,KP=10E-6,VTO=+0.328,LAMBDA=0.01,RD=0)
.MODEL PIX PMOS (LEVEL=2,KP=10E-6,VTO=-0.328,LAMBDA=0.01,KF=0.045E-31,AF=1,TOX=100E-3)
.MODEL NIX NMOS (LEVEL=2,KP=10E-6,VTO=+0.328,LAMBDA=0.01,KF=0.045E-31,AF=1,TOX=100E-3)
.MODEL DX D(IS=1E-14,RS=5)
*?@ End SIMPLIS Encryption
.ENDS AD8605
*
*$

***********************************************************************************
***                                                                             ***
*** Starting AC analysis at 18:54                                               ***
***                                                                             ***
*** Analysis card: .AC DEC 100 1m 100Meg SWEEP SINGLE DEVICE=R14 DEC 10 100m 100***
***                                                                             ***
***********************************************************************************
********************************************************************************
***                                                                          ***
***                            Simulation Options                            ***
***                                                                          ***
********************************************************************************
RELTOL                    0.001
ABSTOL                    1e-12
VNTOL                     1e-06
POINTTOL                  0.001
TEMPERATURE               27C
GMIN                      1e-12
Matrix Solver             UF KLU Version 1.1



********************************************************************************
***                                                                          ***
***                             Device parameters                            ***
***                                                                          ***
********************************************************************************
Instance parameters for devices of type Resistor
================================================
Instance:    R14          
Using model: $Resistor    

resistance   10           


Model parameters for devices of type MOS3
=========================================
Model:       Q1.MINT      Q2.MINT      

cgbo         0            0            
cgdo         0            0            
cgso         0            0            
cj           0            0            
cjsw         0            0            
eta          0            0            
gamma        0            0            
is           1E-24        1E-24        
js           0            0            
kp           519.26m      519.26m      
lmod         100u         100u         
nfs          0            0            
pb           800m         800m         
phi          600m         600m         
tox          100n         100n         
u0           600          600          
vmax         1k           1k           
vt0          2.1488206702 2.1488206702 
wmod         100u         100u         
xj           0            0            


Model parameters for devices of type MOS2
=========================================
Model:       X1.NIX       X1.NOX       X1.PIX       X1.POX       X2.NIX       

af           1            1            1            1            1            
kf           4.5E-33      0            4.5E-33      0            4.5E-33      
kp           10u          10u          10u          10u          10u          
lambda       10m          10m          10m          10m          10m          
rd           0            0            0            0            0            
tox          100m         100n         100m         100n         100m         
vt0          328m         328m         -328m        -328m        328m         

Model:       X2.NOX       X2.PIX       X2.POX       X4.NIX       X4.NOX       

af           1            1            1            1            1            
kf           0            4.5E-33      0            4.5E-33      0            
kp           10u          10u          10u          10u          10u          
lambda       10m          10m          10m          10m          10m          
rd           0            0            0            0            0            
tox          100n         100m         100n         100m         100n         
vt0          328m         -328m        -328m        328m         328m         

Model:       X4.PIX       X4.POX       

af           1            1            
kf           4.5E-33      0            
kp           10u          10u          
lambda       10m          10m          
rd           0            0            
tox          100m         100n         
vt0          -328m        -328m        


Model parameters for devices of type Diode
==========================================
Model:       Q1.DBD       Q2.DBD       X1.DX        X2.DX        X4.DX        

_ibv         10u          10u          100p         100p         100p         
bv           60           60           0            0            0            
cjo          16.94p       16.94p       0            0            0            
fc           500m         500m         500m         500m         500m         
is           48.11615046f 48.11615046f 10f          10f          10f          
m            200m         200m         500m         500m         500m         
n            1            1            1            1            1            
rs           1u           1u           5            5            5            
tt           30n          30n          0            0            0            
vj           500m         500m         1            1            1            


Analysis statistics
===================

Nominal temperature = 27
Operating temperature = 27
Total iterations = 593
Transient iterations = 0
Transient timepoints = 0
Accepted timepoints = 0
Total analysis time = 2.672
Transient time = 0
Matrix reordering time = 0
L-U decomposition time = 0
Matrix solve time = 0
Load time = 0
Transient L-U decomp time = 0
Transient solve time = 0
Circuit build time = 0.015
Simulator initialise time = 0
Data write time = 0
Convergence test time = 0
LTE time = 0
JI2 Iterations = 190
Diag. GMIN stepping iterations = 0
Junc. GMIN stepping iterations = 0
Source stepping iterations = 403
PTA iterations = 0
Number of matrix fill ins = -107
Number of initial matrix elements = 689
Circuit equations = 180
State vector size = 928
Number of write buffer faults = 0

Run statistics
==============

Netlist read in time = 0.047
Total run time = 3.484 seconds
Analysis concluded 19/08/2019 18:54
